<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0f172a">
<title>Japan Trip</title>
<link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiSmFwYW4gVHJpcCIsInNob3J0X25hbWUiOiJKUCIsInN0YXJ0X3VybCI6Ii4vaW5kZXguaHRtbCIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiMwMjA2MTciLCJ0aGVtZV9jb2xvciI6IiMwZjE3MmEiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJTNDc3ZnJTIweG1sbnMlM0QlMjdodHRwJTNBJTJGJTJGd3d3LnczLm9yZyUyRjIwMDAlMkZzdmclMjclMjB3aWR0aCUzRCUyNzE5MiUyNyUyMGhlaWdodCUzRCUyNzE5MiUyNyUzRSUzQ3RleHQlMjB4JTNEJTI3NTAlMjUlMjclMjB5JTNEJTI3NTAlMjUlMjclMjBmb250LXNpemUlM0QlMjcxMjAlMjclMjBkb21pbmFudC1iYXNlbGluZSUzRCUyN21pZGRsZSUyNyUyMHRleHQtYW5jaG9yJTNEJTI3bWlkZGxlJTI3JTNFJUUyJTlCJUE5JTNDJTJGdGV4dCUzRSUzQyUyRnN2ZyUzRSIsInNpemVzIjoiMTkyeDE5MiIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn0seyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwlM0NzdmclMjB4bWxucyUzRCUyN2h0dHAlM0ElMkYlMkZ3d3cudzMub3JnJTJGMjAwMCUyRnN2ZyUyNyUyMHdpZHRoJTNEJTI3NTEyJTI3JTIwaGVpZ2h0JTNEJTI3NTEyJTI3JTNFJTNDdGV4dCUyMHglM0QlMjc1MCUyNSUyNyUyMHklM0QlMjc1MCUyNSUyNyUyMGZvbnQtc2l6ZSUzRCUyNzMyMCUyNyUyMGRvbWluYW50LWJhc2VsaW5lJTNEJTI3bWlkZGxlJTI3JTIwdGV4dC1hbmNob3IlM0QlMjdtaWRkbGUlMjclM0UlRTIlOUIlQTklM0MlMkZ0ZXh0JTNFJTNDJTJGc3ZnJTNFIiwic2l6ZXMiOiI1MTJ4NTEyIiwidHlwZSI6ImltYWdlL3N2Zyt4bWwifV19">
<style>
*{margin:0;padding:0;box-sizing:border-box}:root{--bg:#020617;--card:#111827;--text:#e5e7eb;--muted:#9ca3af;--accent:#22c55e;--warn:#f97316;--info:#3b82f6;--border:rgba(255,255,255,0.06)}body{font-family:-apple-system,sans-serif;background:var(--bg);color:var(--text);font-size:14px;padding-bottom:80px;-webkit-tap-highlight-color:transparent}.top{position:sticky;top:0;background:var(--card);border-bottom:1px solid var(--border);padding:14px;z-index:100;display:flex;justify-content:space-between;align-items:center}.loc{font-size:16px;font-weight:600}.date{font-size:12px;color:var(--muted)}.qbtn{background:var(--card);border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:8px;font-size:12px;margin-left:8px}.qbtn:active{background:var(--info)}.content{padding:14px}.alert{background:var(--warn);color:#fff;padding:14px;border-radius:16px;margin-bottom:14px;display:flex;gap:8px}.alert.info{background:var(--info)}.card{background:var(--card);border-radius:16px;margin-bottom:14px}.hdr{padding:14px;border-left:4px solid var(--info)}.hdr.l{border-left-color:var(--accent)}.hdr.g{border-left-color:var(--warn)}.title{font-size:16px;font-weight:600;margin-bottom:4px}.sub{font-size:14px;color:var(--muted);margin-bottom:8px}.meals{font-size:18px}.sec{border-top:1px solid var(--border);padding:14px}.stitle{font-size:14px;font-weight:600;margin-bottom:8px}.info{margin-bottom:8px}.name{font-size:16px;font-weight:600;margin-bottom:4px}.det{font-size:13px;color:var(--muted);line-height:1.6}.btns{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}.btn{background:var(--card);border:1px solid var(--border);color:var(--text);padding:10px 16px;border-radius:8px;font-size:13px;text-decoration:none;min-height:44px;display:inline-flex;align-items:center;gap:6px}.btn:active{background:var(--info)}.trow{border-top:1px dashed var(--border);padding:14px 0}.trow:first-child{border-top:none;padding-top:0}.t1{font-size:14px;font-weight:600;margin-bottom:4px}.t2{font-size:13px;color:var(--muted)}.act{font-size:14px;line-height:1.6;white-space:pre-line}.tabs{position:fixed;bottom:0;left:0;right:0;background:var(--card);border-top:1px solid var(--border);display:grid;grid-template-columns:repeat(6,1fr);z-index:100}.tab{padding:10px 4px;text-align:center;border:none;background:none;color:var(--muted);font-size:10px;display:flex;flex-direction:column;align-items:center;gap:4px;min-height:60px}.te{font-size:20px}.tab.active{color:var(--accent)}.tab:active{opacity:.7}.tc{display:none}.tc.active{display:block}.acc{background:var(--card);border-radius:16px;margin-bottom:8px}.ah{padding:14px;display:flex;justify-content:space-between;border-left:4px solid var(--info)}.ah.l{border-left-color:var(--accent)}.ah.g{border-left-color:var(--warn)}.ah:active{opacity:.8}.ad{font-size:14px;font-weight:600;margin-bottom:2px}.al{font-size:13px;color:var(--muted)}.ach{font-size:18px;transition:transform .2s}.acc.exp .ach{transform:rotate(180deg)}.aco{display:none;border-top:1px solid var(--border)}.acc.exp .aco{display:block}.tcard{background:var(--card);border-radius:16px;padding:14px;margin-bottom:14px}.th{display:flex;justify-content:space-between;margin-bottom:8px}.tid{font-size:12px;color:var(--muted)}.tt{font-size:14px;font-weight:600;margin:2px 0 4px}.td{font-size:12px;color:var(--muted)}.tbadge{background:var(--warn);color:#fff;padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600}.tr{font-size:14px;margin:8px 0}.tn{font-size:12px;color:var(--muted);margin-top:8px;padding-top:8px;border-top:1px solid var(--border)}.seg{margin-top:8px;padding-top:8px;border-top:1px solid var(--border)}.si{font-size:13px;color:var(--muted);margin-bottom:4px}.dtitle{font-size:18px;font-weight:600;margin-bottom:8px}.dd{font-size:14px;line-height:1.6;margin-bottom:8px;color:var(--muted)}.dh{margin:8px 0}.dh li{font-size:13px;line-height:1.6;margin-left:20px;margin-bottom:4px}.htitle{font-size:16px;font-weight:600;margin-bottom:8px}.hc{font-size:14px;line-height:1.6;color:var(--muted)}.em{background:var(--warn);color:#fff;border-radius:16px;padding:14px;margin-bottom:14px}.pt{width:100%;border-collapse:collapse;margin-top:8px}.pt td{padding:8px;border-bottom:1px solid var(--border);font-size:13px}.pt td:first-child{font-weight:600}.pt td:last-child{color:var(--muted);font-size:12px}.exp{margin-bottom:8px}.eh{background:rgba(255,255,255,0.03);padding:14px;border-radius:8px;display:flex;justify-content:space-between}.eh:active{background:var(--info)}.ec{display:none;padding:14px;font-size:13px;line-height:1.6;color:var(--muted)}.exp.on .ec{display:block}.exp.on .ech{transform:rotate(180deg)}.ech{transition:transform .2s}.load{text-align:center;padding:40px;color:var(--muted)}
</style>
</head>
<body>
<div id="app"><div class="load">Loading...</div></div>
<script>
let D,T='today',CD=new Date().toISOString().split('T')[0];const gt=()=>D.itinerary.find(d=>d.date===CD)||D.itinerary[0],gdt=d=>d.guided_tour?'g':d.transportation?.length?'travel':'l',gmi=m=>{let i=[];m.breakfast&&i.push('ğŸ³');m.lunch&&i.push('ğŸ¥ª');m.dinner&&i.push('ğŸ±');return i.length?i.join(' '):'â—»ï¸'},gte=t=>t.toLowerCase().includes('shinkansen')?'ğŸš„':t.toLowerCase().includes('train')?'ğŸš†':t.toLowerCase().includes('bus')?'ğŸšŒ':t.toLowerCase().includes('ferry')?'â›´ï¸':'ğŸš†',fd=d=>new Date(d+'T00:00:00').toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'}),cp=t=>navigator.clipboard.writeText(t).then(()=>alert('Copied!')),call=p=>window.location.href=`tel:${p}`,maps=a=>window.open((navigator.userAgent.match(/iPhone|iPad|iPod/)?'https://maps.apple.com/?q=':'https://www.google.com/maps/search/')+encodeURIComponent(a)),tog=i=>document.getElementById(`d${i}`).classList.toggle('exp'),toge=i=>document.getElementById(i).classList.toggle('on'),rtb=()=>{const d=gt(),l=d.location||d.route||'Japan',h=d.accommodation?.name||'';return`<div class="top"><div><div class="loc">${l}</div><div class="date">${fd(d.date)}</div></div><div>${h?`<button class="qbtn" onclick="call('${d.accommodation.phone}')">â˜ï¸</button><button class="qbtn" onclick="maps('${d.accommodation.address}')">ğŸ—ºï¸</button>`:''}</div></div>`},ral=d=>{let a=[];(d.day===8||d.day===9)&&a.push({t:'info',i:'ğŸ“¶',m:`WiFi at ${D.wifi_router.delivery}`});d.day===15&&a.push({t:'warn',i:'ğŸ“¦',m:'Return WiFi today'});d.transportation?.some(t=>t.operator?.includes('Shinkansen'))&&a.push({t:'warn',i:'ğŸ›„',m:'Check luggage size'});d.accommodation&&!d.accommodation.same_as_previous&&a.push({t:'info',i:'â°',m:`Checkout ${d.accommodation.check_out||'11:00'}`});return a.map(a=>`<div class="alert ${a.t==='info'?'info':''}"><div>${a.i}</div><div>${a.m}</div></div>`).join('')},rdc=d=>{const t=gdt(d),m=gmi(d.meals);return`<div class="card"><div class="hdr ${t}"><div class="title">${d.day_of_week}, Day ${d.day}</div><div class="sub">${d.location||d.route}</div><div class="meals">${m}</div></div>${d.accommodation&&!d.accommodation.same_as_previous?`<div class="sec"><div class="stitle">ğŸ¨ Hotel</div><div class="info"><div class="name">${d.accommodation.name}</div><div class="det">${d.accommodation.address||''}<br>${d.accommodation.japanese_address||''}<br>In: ${d.accommodation.check_in} Out: ${d.accommodation.check_out}</div></div><div class="btns"><a href="tel:${d.accommodation.phone}" class="btn">â˜ï¸</a><button class="btn" onclick="maps('${d.accommodation.address}')">ğŸ—ºï¸</button><button class="btn" onclick="cp('${d.accommodation.address}')">ğŸ“‹ EN</button><button class="btn" onclick="cp('${d.accommodation.japanese_address}')">ğŸ“‹ JP</button></div></div>`:''}${d.transportation?.length?`<div class="sec"><div class="stitle">ğŸš† Transport</div>${d.transportation.map(t=>`<div class="trow"><div class="t1">${gte(t.type)} ${t.operator||''} ${t.train_number||''}</div><div class="t2">${t.departure.time||''} ${t.departure.location} â†’ ${t.arrival.location} â€¢ ${t.duration}</div></div>`).join('')}</div>`:''}${d.activities?`<div class="sec"><div class="stitle">ğŸ“ Activities</div><div class="act">${d.activities}</div>${d.highlights?`<ul class="dh">${d.highlights.map(h=>`<li>${h}</li>`).join('')}</ul>`:''}</div>`:''}${d.guided_tour?`<div class="sec"><div class="stitle">ğŸ‘¨â€ğŸ« Tour</div><div class="det">Meet: ${d.guided_tour.meeting_time} at ${d.guided_tour.meeting_place}<br>${d.guided_tour.meeting_address_english}<br>${d.guided_tour.meeting_address_japanese}</div>${d.itinerary?`<ul class="dh">${d.itinerary.map(s=>`<li><b>${s.stop}</b>: ${s.description}</li>`).join('')}</ul>`:''}</div>`:''}</div>`},rtd=()=>{const d=gt();return ral(d)+rdc(d)},rpl=()=>D.itinerary.map(d=>{const t=gdt(d);return`<div class="acc" id="d${d.day}"><div class="ah ${t}" onclick="tog(${d.day})"><div><div class="ad">${d.day_of_week}, Day ${d.day}</div><div class="al">${d.location||d.route}</div></div><div class="ach">â–¼</div></div><div class="aco">${rdc(d)}</div></div>`}).join(''),rtr=()=>{const a=[];D.itinerary.forEach(d=>{d.transportation?.forEach(t=>{a.push({...t,date:d.date})})});let cd='';return a.map(t=>{let h='';t.date!==cd&&(cd=t.date,h=`<div style="font-weight:600;margin:20px 0 10px;color:var(--accent)">${fd(t.date)}</div>`);return`${h}<div class="trow"><div class="t1">${gte(t.type)} ${t.operator||''} ${t.train_number||''}</div><div class="t2">${t.departure.time||''} ${t.departure.location} â†’ ${t.arrival.location} â€¢ ${t.duration}</div>${t.notes?`<div style="font-size:12px;color:var(--muted);margin-top:6px">${t.notes}</div>`:''}</div>`}).join('')},rpc=()=>{const h=[],s=new Set();D.itinerary.forEach(d=>{if(d.accommodation&&!d.accommodation.same_as_previous){const n=d.accommodation.name;!s.has(n)&&(s.add(n),h.push(d.accommodation))}});const hs=h.map(h=>`<div class="tcard"><div class="name">${h.name}</div><div class="det">${h.address}<br>${h.japanese_address}<br>${h.phone}</div><div class="btns"><a href="tel:${h.phone}" class="btn">â˜ï¸</a><button class="btn" onclick="maps('${h.address}')">ğŸ—ºï¸</button>${h.website?`<a href="${h.website}" class="btn">ğŸŒ</a>`:''}</div></div>`).join(''),ds=Object.entries(D.destinations_info).map(([k,d])=>`<div class="tcard"><div class="dtitle">${k.charAt(0).toUpperCase()+k.slice(1)}</div><div class="dd">${d.description}</div>${d.highlights?`<ul class="dh">${d.highlights.map(h=>`<li>${h}</li>`).join('')}</ul>`:''}<div class="btns"><a href="https://en.wikipedia.org/wiki/${k}" class="btn">ğŸ“–</a><button class="btn" onclick="maps('${k} Japan')">ğŸ—ºï¸</button></div></div>`).join('');return`<div style="font-weight:600;margin-bottom:12px">Hotels</div>${hs}<div style="font-weight:600;margin:24px 0 12px">Destinations</div>${ds}`},rwl=()=>D.ticket_summary.tickets.map(t=>{const o=t.note?.includes('S mark'),k=t.note?.includes('Keep');return`<div class="tcard"><div class="th"><div><div class="tid">#${t.ticket_id}</div><div class="tt">${t.type}</div><div class="td">${fd(t.date)}</div></div>${o||k?`<div class="tbadge">${o?'ğŸ›„':'âš ï¸'}</div>`:''}</div>${t.from&&t.to?`<div class="tr">${t.from} â†’ ${t.to}</div>`:''}${t.coverage?`<div class="tr">${t.coverage}</div>`:''}${t.segments?`<div class="seg"><b>Segments:</b>${t.segments.map(s=>`<div class="si">${s.from} â†’ ${s.to}${s.train?` (${s.train})`:''}</div>`).join('')}</div>`:''}${t.note?`<div class="tn">${t.note}</div>`:''}</div>`}).join(''),rhp=()=>{const e=`<div class="em"><div class="htitle">â˜ï¸ Emergency</div><div class="hc">24h: ${D.emergency_contacts.customer_care_24h}<br>Email: ${D.emergency_contacts.email}<br><br>${D.emergency_contacts.note}</div><div class="btns" style="margin-top:12px"><a href="tel:${D.emergency_contacts.customer_care_24h}" class="btn">â˜ï¸</a><a href="mailto:${D.emergency_contacts.email}" class="btn">âœ‰ï¸</a></div></div>`,w=`<div class="tcard"><div class="htitle">ğŸ“¶ WiFi</div><div class="hc">Delivery: ${D.wifi_router.delivery}<br>Return: ${D.wifi_router.return}<br><br>${D.wifi_router.features.map(f=>`â€¢ ${f}`).join('<br>')}</div></div>`,s=`<div class="tcard"><div class="htitle">ğŸ“± App</div><div class="hc">Login: ${D.self_guide_app.login}<br>Password: ${D.self_guide_app.password}<br>Limit: ${D.self_guide_app.device_limit}<br><br>${D.self_guide_app.note}</div></div>`,l=`<div class="exp" id="lug"><div class="eh" onclick="toge('lug')"><span>ğŸ›„ Luggage</span><span class="ech">â–¼</span></div><div class="ec">${D.important_information.oversized_luggage_shinkansen.rule}<br><br>Under 160cm: ${D.important_information.oversized_luggage_shinkansen.under_160cm}<br><br>161-250cm: ${D.important_information.oversized_luggage_shinkansen["161_250cm"]}</div></div>`,i=`<div class="exp" id="ic"><div class="eh" onclick="toge('ic')"><span>ğŸ’³ IC Cards</span><span class="ech">â–¼</span></div><div class="ec">${D.important_information.ic_cards.purpose}<br><br>Types: ${D.important_information.ic_cards.types.join(', ')}</div></div>`,d=`<div class="exp" id="dis"><div class="eh" onclick="toge('dis')"><span>âš ï¸ Disaster</span><span class="ech">â–¼</span></div><div class="ec">${D.important_information.natural_disaster_protocol.map(p=>`â€¢ ${p}`).join('<br>')}</div></div>`,p=[{en:"Help!",ja:"åŠ©ã‘ã¦!",r:"Tasukete!"},{en:"Police",ja:"è­¦å¯Ÿ",r:"Keisatsu"},{en:"Hospital",ja:"ç—…é™¢",r:"ByÅin"},{en:"I'm lost",ja:"é“ã«è¿·ã„ã¾ã—ãŸ",r:"Michi ni mayoimashita"},{en:"Station?",ja:"é§…ã¯ã©ã“ã§ã™ã‹?",r:"Eki wa doko?"},{en:"Thanks",ja:"ã‚ã‚ŠãŒã¨ã†",r:"ArigatÅ"}],ph=`<div class="tcard"><div class="htitle">ğŸ—£ï¸ Phrases</div><table class="pt">${p.map(x=>`<tr><td>${x.en}</td><td>${x.ja}</td><td>${x.r}</td></tr>`).join('')}</table></div>`;return`${e}${w}${s}${l}${i}${d}${ph}`},sw=t=>{T=t;document.querySelectorAll('.tab').forEach(e=>e.classList.toggle('active',e.dataset.t===t));document.querySelectorAll('.tc').forEach(e=>e.classList.toggle('active',e.dataset.t===t))},r=()=>{document.getElementById('app').innerHTML=`${rtb()}<div class="tabs"><button class="tab active" data-t="today" onclick="sw('today')"><div class="te">ğŸ—“ï¸</div>Today</button><button class="tab" data-t="plan" onclick="sw('plan')"><div class="te">ğŸ§­</div>Plan</button><button class="tab" data-t="travel" onclick="sw('travel')"><div class="te">ğŸš†</div>Travel</button><button class="tab" data-t="places" onclick="sw('places')"><div class="te">ğŸ—ºï¸</div>Places</button><button class="tab" data-t="wallet" onclick="sw('wallet')"><div class="te">ğŸŸï¸</div>Wallet</button><button class="tab" data-t="help" onclick="sw('help')"><div class="te">â˜ï¸</div>Help</button></div><div class="content"><div class="tc active" data-t="today">${rtd()}</div><div class="tc" data-t="plan">${rpl()}</div><div class="tc" data-t="travel">${rtr()}</div><div class="tc" data-t="places">${rpc()}</div><div class="tc" data-t="wallet">${rwl()}</div><div class="tc" data-t="help">${rhp()}</div></div>`};fetch('trip.json').then(r=>r.json()).then(d=>{D=d;r()}).catch(e=>{document.getElementById('app').innerHTML='<div class="load">Error loading trip.json</div>';console.error(e)});
</script>
</body>
</html>
